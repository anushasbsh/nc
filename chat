import java.io.*; import java.net.*;
public class GossipServer {
public static void main(String[] args) throws IOException {
ServerSocket serverSocket = new ServerSocket(4000);
System.out.println("Server ready for chatting");
Socket socket = serverSocket.accept();
BufferedReader keyRead = new BufferedReader(new InputStreamReader(System.in));
OutputStream ostream = socket.getOutputStream();
PrintWriter pwrite = new PrintWriter(ostream, true);
InputStream istream = socket.getInputStream();
BufferedReader receiveRead = new BufferedReader(new InputStreamReader(istream));
String receiveMessage, sendMessage; while (true) {
if ((receiveMessage = receiveRead.readLine()) != null) { System.out.println(receiveMessage);
}
sendMessage = keyRead.readLine(); pwrite.println(sendMessage); pwrite.flush();
}
}
}

import java.io.*; import java.net.*;
public class GossipClient {
public static void main(String[] args) throws IOException {
Socket socket = new Socket("127.0.0.1", 4000);
BufferedReader keyRead = new BufferedReader(new InputStreamReader(System.in));
OutputStream ostream = socket.getOutputStream();
PrintWriter pwrite = new PrintWriter(ostream, true);
InputStream istream = socket.getInputStream();
BufferedReader receiveRead = new BufferedReader(new InputStreamReader(istream));
System.out.println("Start the chitchat, type and press Enter key"); String receiveMessage, sendMessage; while (true) {
sendMessage = keyRead.readLine(); pwrite.println(sendMessage); pwrite.flush();
if ((receiveMessage = receiveRead.readLine()) != null) { System.out.println(receiveMessage);
}
}
}
}
